"use strict";const pt=require("@codemirror/state"),t=require("@lezer/highlight"),u=require("markedit-api"),ct=require("@codemirror/view"),E=require("@codemirror/language"),c={selectionBackground:".cm-selectionBackground",lineGutter:".cm-lineNumbers > .cm-activeLineGutter",foldGutter:".cm-foldGutter, .cm-foldPlaceholder",visibleSpace:".cm-visibleSpace, .cm-visibleSpace::before, .cm-visibleLineBreak, .cm-visibleLineBreak::before",matchingBracket:".cm-matchingBracket",activeIndicator:".cm-md-activeIndicator",emphasisElement:".cm-md-bold:not(.tok-meta), .cm-md-italic:not(.tok-meta), .cm-md-quote:not(.cm-md-quoteMark)",accentColor:".cm-md-header:not(.tok-meta):not(.cm-md-quote), .cm-md-codeInfo",syntaxMarker:".cm-md-header.tok-meta:not(.cm-md-quote), .cm-md-codeMark, .cm-md-linkMark, .cm-md-listMark, .cm-md-quoteMark"},kt=`
.cm-activeLineGutter { background: inherit !important }
.cm-searchMatch.cm-searchMatch-selected { outline: inherit !important }
${c.lineGutter} {}
${c.foldGutter} {}
${c.visibleSpace} {}
${c.matchingBracket} {}
${c.activeIndicator} {}
${c.emphasisElement} {}
${c.accentColor} {}
${c.syntaxMarker} {}
`,nt=window,yt=nt.__extractStyleRules__??(o=>o.value?.rules),vt=nt.__extractHighlightSpecs__??(o=>o.value?.specs);function Ct(o){const e=document.createElement("style");return e.textContent=o,document.head.appendChild(e),e}function xt(o){if(o===void 0)return[{},[]];const e=St(o);return[Object.fromEntries(e.flatMap(r=>{const n=yt(r)?.join(`
`)??"";return Object.entries(Tt(n))})),e.flatMap(r=>vt(r)??[])]}function $t(o,e){return o.some(a=>a.tag.toString().includes(e.toString())?a.color!==void 0:!1)}function P(o,e,a){for(const[r,n]of Object.entries(o))if(r.includes(e)&&(a===void 0||!r.includes(a))){const s=n.background??n.backgroundColor;if(s!==void 0)return s}}function Bt(o){const e=o.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/);if(e===null)return;const[a,r,n]=e.slice(1,4).map(Number);return`rgba(${a}, ${r}, ${n}, 0.6)`}function St(o){const e=[],a=[o];for(;a.length>0;){const r=a.pop();Array.isArray(r)?r.forEach(n=>a.push(n)):"extension"in r?a.push(r.extension):e.push(r)}return e}function Tt(o){const e={},a=new CSSStyleSheet;a.replaceSync(o);for(const r of a.cssRules){const{style:n,selectorText:s}=r,{background:y,backgroundColor:h}=n;e[s]={},y.length>0&&(e[s].background=y),h.length>0&&(e[s].backgroundColor=h)}return e}function Mt(o){o.light!==void 0&&(l().customThemes.light=o.light),o.dark!==void 0&&(l().customThemes.dark=o.dark),typeof u.MarkEdit.editorView=="object"&&I(u.MarkEdit.editorView)}const M=window,l=()=>M.__markeditTheming__,st=matchMedia("(prefers-color-scheme: dark)");typeof l()!="object"&&_t();function _t(){M.__markeditTheming__={styleSheet:Ct(kt),configurator:new pt.Compartment,customThemes:{},lightOriginalRules:{},darkOriginalRules:{}},u.MarkEdit.addExtension(l().configurator.of([])),u.MarkEdit.onEditorReady(e=>I(e));const o=()=>setTimeout(()=>I(u.MarkEdit.editorView),15);st.addEventListener("change",o),l().mainThemeName=M.config.theme,Object.defineProperty(M.config,"theme",{get(){return l().mainThemeName},set(e){l().mainThemeName=e,o()}})}function I(o){const e=st.matches,a=e?l().customThemes.dark:l().customThemes.light;o.dispatch({effects:l().configurator.reconfigure(a?.extension??[])});const[r,n]=xt(a?.extension),s=a===void 0;l().styleSheet.disabled=s,wt(o,e,s,r,n,a?.colors)}function wt(o,e,a,r,n,s){const y=P(r,".cm-activeLine",".cm-activeLineGutter"),h=P(r,c.selectionBackground),dt=P(r,c.matchingBracket),K=getComputedStyle(o.contentDOM).color,z=s?.visibleSpace??Bt(K),mt=$t(n,t.tags.heading),ut=[[c.activeIndicator,y,"background"],[c.matchingBracket,dt,"background"],[c.lineGutter,K,"color"],[c.foldGutter,z,"color"],[c.visibleSpace,z,"color"],[c.accentColor,s?.accentColor,"color"],[c.syntaxMarker,s?.syntaxMarker,"color"]],ht=Array.from(document.querySelectorAll("style")),v=e?l().darkOriginalRules:l().lightOriginalRules;for(const bt of ht){const L=bt.sheet?.cssRules;if(L!==void 0)for(let G=0;G<L.length;++G){const g=L[G],i=g.selectorText??"";i.includes(".cm-focused")&&i.includes(c.selectionBackground)&&(v.selectionBackground??=g.cssText,a?g.cssText=v.selectionBackground:h!==void 0&&g.style.setProperty("background",h,"important")),mt&&(i===".cm-md-header"||i===".cm-md-header:not(.cm-md-quote)")&&(v.markdownHeader??=g.cssText,a?g.cssText=v.markdownHeader:g.style.removeProperty("color"));for(const[ft,F,J]of ut)i===ft&&(F===void 0?g.style.removeProperty(J):(g.style.setProperty(J,F,"important"),(i===c.matchingBracket||i===c.activeIndicator)&&g.style.setProperty("box-shadow","unset","important")));i===c.emphasisElement&&(s?.subtleEmphasis??!0?g.style.setProperty("color","inherit","important"):g.style.removeProperty("color"))}}}const Nt="#3c3836",qt="#504945",Et="#665c54",Lt="#7c6f64",Gt="#928374",Pt="#fbf1c7",Ht="#ebdbb2",Rt="#bdae93",Ot="#9d0006",jt="#79740e",Dt="#b57614",It="#076678",Wt="#8f3f71",Vt="#427b58",At="#af3a03",lt=Pt,W=Ht,b=Rt,Q=Gt,d=Nt,Ut=qt,Kt=Et,zt=Lt,_=Ot,C=jt,p=Dt,H=It,x=Wt,$=Vt,w=At,X=_,V=W,R=V,Ft=lt,O=W,Jt=V,Y=w,Qt=ct.EditorView.theme({"&":{color:d,backgroundColor:Ft},".cm-content":{caretColor:Y},".cm-cursor, .cm-dropCursor":{borderLeftColor:Y},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Jt},".cm-panels":{backgroundColor:V,color:d},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:lt,color:p,outline:`1px solid ${b}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:b},".cm-activeLine":{backgroundColor:R},".cm-selectionMatch":{backgroundColor:b},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${b}`,fontStyle:"bold"},"&.cm-focused .cm-matchingBracket":{backgroundColor:b},".cm-gutters":{backgroundColor:W,color:Kt,border:"none"},".cm-activeLineGutter":{backgroundColor:R},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:O},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:O,borderBottomColor:O},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:R,color:Ut}}},{dark:!1}),Xt=E.HighlightStyle.define([{tag:t.tags.keyword,color:_},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.propertyName,t.tags.macroName],color:$},{tag:[t.tags.variableName],color:H},{tag:[t.tags.function(t.tags.variableName)],color:C,fontStyle:"bold"},{tag:[t.tags.labelName],color:d},{tag:[t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name)],color:x},{tag:[t.tags.definition(t.tags.name),t.tags.separator],color:d},{tag:[t.tags.brace],color:d},{tag:[t.tags.annotation],color:X},{tag:[t.tags.number,t.tags.changed,t.tags.annotation,t.tags.modifier,t.tags.self,t.tags.namespace],color:x},{tag:[t.tags.typeName,t.tags.className],color:p},{tag:[t.tags.operator,t.tags.operatorKeyword],color:_},{tag:[t.tags.tagName],color:$,fontStyle:"bold"},{tag:[t.tags.squareBracket],color:w},{tag:[t.tags.angleBracket],color:H},{tag:[t.tags.attributeName],color:$},{tag:[t.tags.regexp],color:$},{tag:[t.tags.quote],color:Q},{tag:[t.tags.string],color:d},{tag:t.tags.link,color:zt,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[t.tags.url,t.tags.escape,t.tags.special(t.tags.string)],color:x},{tag:[t.tags.meta],color:p},{tag:[t.tags.comment],color:Q,fontStyle:"italic"},{tag:t.tags.strong,fontWeight:"bold",color:w},{tag:t.tags.emphasis,fontStyle:"italic",color:C},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:t.tags.heading,fontWeight:"bold",color:C},{tag:[t.tags.heading1,t.tags.heading2],fontWeight:"bold",color:C},{tag:[t.tags.heading3,t.tags.heading4],fontWeight:"bold",color:p},{tag:[t.tags.heading5,t.tags.heading6],color:p},{tag:[t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:x},{tag:[t.tags.processingInstruction,t.tags.inserted],color:H},{tag:[t.tags.contentSeparator],color:_},{tag:t.tags.invalid,color:w,borderBottom:`1px dotted ${X}`}]),Yt=[Qt,E.syntaxHighlighting(Xt)],Zt="#282828",to="#3c3836",oo="#665c54",eo="#928374",ao="#ebdbb2",ro="#d5c4a1",co="#bdae93",no="#a89984",so="#fb4934",lo="#b8bb26",go="#fabd2f",gt="#83a598",io="#d3869b",mo="#8ec07c",uo="#fe8019",it=Zt,A=to,f=oo,Z=eo,m=ao,ho=ro,bo=co,fo=no,N=so,B=lo,k=go,tt=gt,S=io,T=mo,q=uo,ot=N,U=A,j=U,po=it,D=A,ko=U,et=q,yo=ct.EditorView.theme({"&":{color:m,backgroundColor:po},".cm-content":{caretColor:et},".cm-cursor, .cm-dropCursor":{borderLeftColor:et},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ko},".cm-panels":{backgroundColor:U,color:m},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:it,color:k,outline:`1px solid ${f}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:f},".cm-activeLine":{backgroundColor:j},".cm-selectionMatch":{backgroundColor:f},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${f}`,fontStyle:"bold"},"&.cm-focused .cm-matchingBracket":{backgroundColor:f},".cm-gutters":{backgroundColor:A,color:bo,border:"none"},".cm-activeLineGutter":{backgroundColor:j},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:D},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:D,borderBottomColor:D},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:j,color:ho}}},{dark:!0}),vo=E.HighlightStyle.define([{tag:t.tags.keyword,color:N},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.propertyName,t.tags.macroName],color:T},{tag:[t.tags.variableName],color:tt},{tag:[t.tags.function(t.tags.variableName)],color:B,fontStyle:"bold"},{tag:[t.tags.labelName],color:m},{tag:[t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name)],color:S},{tag:[t.tags.definition(t.tags.name),t.tags.separator],color:m},{tag:[t.tags.brace],color:m},{tag:[t.tags.annotation],color:ot},{tag:[t.tags.number,t.tags.changed,t.tags.annotation,t.tags.modifier,t.tags.self,t.tags.namespace],color:S},{tag:[t.tags.typeName,t.tags.className],color:k},{tag:[t.tags.operator,t.tags.operatorKeyword],color:N},{tag:[t.tags.tagName],color:T,fontStyle:"bold"},{tag:[t.tags.squareBracket],color:q},{tag:[t.tags.angleBracket],color:tt},{tag:[t.tags.attributeName],color:T},{tag:[t.tags.regexp],color:T},{tag:[t.tags.quote],color:Z},{tag:[t.tags.string],color:m},{tag:t.tags.link,color:fo,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[t.tags.url,t.tags.escape,t.tags.special(t.tags.string)],color:S},{tag:[t.tags.meta],color:k},{tag:[t.tags.comment],color:Z,fontStyle:"italic"},{tag:t.tags.strong,fontWeight:"bold",color:q},{tag:t.tags.emphasis,fontStyle:"italic",color:B},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:t.tags.heading,fontWeight:"bold",color:B},{tag:[t.tags.heading1,t.tags.heading2],fontWeight:"bold",color:B},{tag:[t.tags.heading3,t.tags.heading4],fontWeight:"bold",color:k},{tag:[t.tags.heading5,t.tags.heading6],color:k},{tag:[t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:S},{tag:[t.tags.processingInstruction,t.tags.inserted],color:gt},{tag:[t.tags.contentSeparator],color:N},{tag:t.tags.invalid,color:q,borderBottom:`1px dotted ${ot}`}]),Co=[yo,E.syntaxHighlighting(vo)],at=(o,e={})=>o??e,xo=at(at(u.MarkEdit.userSettings)["extension.markeditThemeGruvbox"]),rt=xo.enabledMode??"both",$o={extension:Yt,colors:{accentColor:"#79740e",syntaxMarker:"#076678"}},Bo={extension:Co,colors:{accentColor:"#b8bb26",syntaxMarker:"#83a598"}};Mt({light:["both","light"].includes(rt)?$o:void 0,dark:["both","dark"].includes(rt)?Bo:void 0});
