"use strict";const bt=require("@codemirror/state"),t=require("@lezer/highlight"),k=require("markedit-api"),at=require("@codemirror/view"),E=require("@codemirror/language"),c={selectionBackground:".cm-selectionBackground",lineGutter:".cm-lineNumbers > .cm-activeLineGutter",foldGutter:".cm-foldGutter, .cm-foldPlaceholder",visibleSpace:".cm-visibleSpace, .cm-visibleSpace::before, .cm-visibleLineBreak, .cm-visibleLineBreak::before",matchingBracket:".cm-matchingBracket",activeIndicator:".cm-md-activeIndicator",emphasisElement:".cm-md-bold:not(.tok-meta), .cm-md-italic:not(.tok-meta), .cm-md-quote:not(.cm-md-quoteMark)",accentColor:".cm-md-header:not(.tok-meta):not(.cm-md-quote), .cm-md-codeInfo",syntaxMarker:".cm-md-header.tok-meta:not(.cm-md-quote), .cm-md-codeMark, .cm-md-linkMark, .cm-md-listMark, .cm-md-quoteMark"},ft=`
.cm-activeLineGutter { background: inherit !important }
.cm-searchMatch.cm-searchMatch-selected { outline: inherit !important }
${c.lineGutter} {}
${c.foldGutter} {}
${c.visibleSpace} {}
${c.matchingBracket} {}
${c.activeIndicator} {}
${c.emphasisElement} {}
${c.accentColor} {}
${c.syntaxMarker} {}
`,rt=window,pt=rt.__extractStyleRules__??(o=>o.value?.rules),kt=rt.__extractHighlightSpecs__??(o=>o.value?.specs);function yt(o){const e=document.createElement("style");return e.textContent=o,document.head.appendChild(e),e}function Ct(o){if(o===void 0)return[{},[]];const e=$t(o);return[Object.fromEntries(e.flatMap(r=>{const n=pt(r)?.join(`
`)??"";return Object.entries(Bt(n))})),e.flatMap(r=>kt(r)??[])]}function vt(o,e){return o.some(a=>a.tag.toString().includes(e.toString())?a.color!==void 0:!1)}function G(o,e){for(const[a,r]of Object.entries(o))if(a.includes(e)){const n=r.background??r.backgroundColor;if(n!==void 0)return n}}function xt(o){const e=o.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/);if(e===null)return;const[a,r,n]=e.slice(1,4).map(Number);return`rgba(${a}, ${r}, ${n}, 0.6)`}function $t(o){const e=[],a=[o];for(;a.length>0;){const r=a.pop();Array.isArray(r)?r.forEach(n=>a.push(n)):"extension"in r?a.push(r.extension):e.push(r)}return e}function Bt(o){const e={},a=new CSSStyleSheet;a.replaceSync(o);for(const r of a.cssRules){const{style:n,selectorText:g}=r,{background:y,backgroundColor:u}=n;e[g]={},y.length>0&&(e[g].background=y),u.length>0&&(e[g].backgroundColor=u)}return e}function St(o){o.light!==void 0&&(s().customThemes.light=o.light),o.dark!==void 0&&(s().customThemes.dark=o.dark),typeof k.MarkEdit.editorView=="object"&&I(k.MarkEdit.editorView)}const T=window,s=()=>T.__markeditTheming__,ct=matchMedia("(prefers-color-scheme: dark)");typeof s()!="object"&&_t();function _t(){T.__markeditTheming__={styleSheet:yt(ft),configurator:new bt.Compartment,customThemes:{},lightOriginalRules:{},darkOriginalRules:{}},k.MarkEdit.addExtension(s().configurator.of([])),k.MarkEdit.onEditorReady(e=>I(e));const o=()=>setTimeout(()=>I(k.MarkEdit.editorView),15);ct.addEventListener("change",o),s().mainThemeName=T.config.theme,Object.defineProperty(T.config,"theme",{get(){return s().mainThemeName},set(e){s().mainThemeName=e,o()}})}function I(o){const e=ct.matches,a=e?s().customThemes.dark:s().customThemes.light;o.dispatch({effects:s().configurator.reconfigure(a?.extension??[])});const[r,n]=Ct(a?.extension),g=a===void 0;s().styleSheet.disabled=g,Tt(o,e,g,r,n,a?.colors)}function Tt(o,e,a,r,n,g){const y=G(r,".cm-activeLine"),u=G(r,c.selectionBackground),gt=G(r,c.matchingBracket),K=getComputedStyle(o.contentDOM).color,z=g?.visibleSpace??xt(K),it=vt(n,t.tags.heading),dt=[[c.activeIndicator,y,"background"],[c.matchingBracket,gt,"background"],[c.lineGutter,K,"color"],[c.foldGutter,z,"color"],[c.visibleSpace,z,"color"],[c.accentColor,g?.accentColor,"color"],[c.syntaxMarker,g?.syntaxMarker,"color"]],mt=Array.from(document.querySelectorAll("style")),C=e?s().darkOriginalRules:s().lightOriginalRules;for(const ut of mt){const L=ut.sheet?.cssRules;if(L!==void 0)for(let P=0;P<L.length;++P){const l=L[P],i=l.selectorText??"";i.includes(".cm-focused")&&i.includes(c.selectionBackground)&&(C.selectionBackground??=l.cssText,a?l.cssText=C.selectionBackground:u!==void 0&&l.style.setProperty("background",u,"important")),it&&(i===".cm-md-header"||i===".cm-md-header:not(.cm-md-quote)")&&(C.markdownHeader??=l.cssText,a?l.cssText=C.markdownHeader:l.style.removeProperty("color"));for(const[ht,F,J]of dt)i===ht&&(F===void 0?l.style.removeProperty(J):(l.style.setProperty(J,F,"important"),(i===c.matchingBracket||i===c.activeIndicator)&&l.style.setProperty("box-shadow","unset","important")));i===c.emphasisElement&&(g?.subtleEmphasis??!0?l.style.setProperty("color","inherit","important"):l.style.removeProperty("color"))}}}const Mt="#3c3836",wt="#504945",Nt="#665c54",qt="#7c6f64",Et="#928374",Lt="#fbf1c7",Pt="#ebdbb2",Gt="#bdae93",Ht="#9d0006",Rt="#79740e",Dt="#b57614",Ot="#076678",jt="#8f3f71",It="#427b58",Wt="#af3a03",nt=Lt,W=Pt,h=Gt,Q=Et,d=Mt,At=wt,Vt=Nt,Ut=qt,M=Ht,v=Rt,f=Dt,H=Ot,x=jt,$=It,w=Wt,X=M,A=W,R=A,Kt=nt,D=W,zt=A,Y=w,Ft=at.EditorView.theme({"&":{color:d,backgroundColor:Kt},".cm-content":{caretColor:Y},".cm-cursor, .cm-dropCursor":{borderLeftColor:Y},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:zt},".cm-panels":{backgroundColor:A,color:d},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:nt,color:f,outline:`1px solid ${h}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:h},".cm-activeLine":{backgroundColor:R},".cm-selectionMatch":{backgroundColor:h},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${h}`,fontStyle:"bold"},"&.cm-focused .cm-matchingBracket":{backgroundColor:h},".cm-gutters":{backgroundColor:W,color:Vt,border:"none"},".cm-activeLineGutter":{backgroundColor:R},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:D},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:D,borderBottomColor:D},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:R,color:At}}},{dark:!1}),Jt=E.HighlightStyle.define([{tag:t.tags.keyword,color:M},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.propertyName,t.tags.macroName],color:$},{tag:[t.tags.variableName],color:H},{tag:[t.tags.function(t.tags.variableName)],color:v,fontStyle:"bold"},{tag:[t.tags.labelName],color:d},{tag:[t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name)],color:x},{tag:[t.tags.definition(t.tags.name),t.tags.separator],color:d},{tag:[t.tags.brace],color:d},{tag:[t.tags.annotation],color:X},{tag:[t.tags.number,t.tags.changed,t.tags.annotation,t.tags.modifier,t.tags.self,t.tags.namespace],color:x},{tag:[t.tags.typeName,t.tags.className],color:f},{tag:[t.tags.operator,t.tags.operatorKeyword],color:M},{tag:[t.tags.tagName],color:$,fontStyle:"bold"},{tag:[t.tags.squareBracket],color:w},{tag:[t.tags.angleBracket],color:H},{tag:[t.tags.attributeName],color:$},{tag:[t.tags.regexp],color:$},{tag:[t.tags.quote],color:Q},{tag:[t.tags.string],color:d},{tag:t.tags.link,color:Ut,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[t.tags.url,t.tags.escape,t.tags.special(t.tags.string)],color:x},{tag:[t.tags.meta],color:f},{tag:[t.tags.comment],color:Q,fontStyle:"italic"},{tag:t.tags.strong,fontWeight:"bold",color:w},{tag:t.tags.emphasis,fontStyle:"italic",color:v},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:t.tags.heading,fontWeight:"bold",color:v},{tag:[t.tags.heading1,t.tags.heading2],fontWeight:"bold",color:v},{tag:[t.tags.heading3,t.tags.heading4],fontWeight:"bold",color:f},{tag:[t.tags.heading5,t.tags.heading6],color:f},{tag:[t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:x},{tag:[t.tags.processingInstruction,t.tags.inserted],color:H},{tag:[t.tags.contentSeparator],color:M},{tag:t.tags.invalid,color:w,borderBottom:`1px dotted ${X}`}]),Qt=[Ft,E.syntaxHighlighting(Jt)],Xt="#282828",Yt="#3c3836",Zt="#665c54",to="#928374",oo="#ebdbb2",eo="#d5c4a1",ao="#bdae93",ro="#a89984",co="#fb4934",no="#b8bb26",so="#fabd2f",st="#83a598",lo="#d3869b",go="#8ec07c",io="#fe8019",lt=Xt,V=Yt,b=Zt,Z=to,m=oo,mo=eo,uo=ao,ho=ro,N=co,B=no,p=so,tt=st,S=lo,_=go,q=io,ot=N,U=V,O=U,bo=lt,j=V,fo=U,et=q,po=at.EditorView.theme({"&":{color:m,backgroundColor:bo},".cm-content":{caretColor:et},".cm-cursor, .cm-dropCursor":{borderLeftColor:et},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:fo},".cm-panels":{backgroundColor:U,color:m},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:lt,color:p,outline:`1px solid ${b}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:b},".cm-activeLine":{backgroundColor:O},".cm-selectionMatch":{backgroundColor:b},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${b}`,fontStyle:"bold"},"&.cm-focused .cm-matchingBracket":{backgroundColor:b},".cm-gutters":{backgroundColor:V,color:uo,border:"none"},".cm-activeLineGutter":{backgroundColor:O},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:j},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:j,borderBottomColor:j},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:O,color:mo}}},{dark:!0}),ko=E.HighlightStyle.define([{tag:t.tags.keyword,color:N},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.propertyName,t.tags.macroName],color:_},{tag:[t.tags.variableName],color:tt},{tag:[t.tags.function(t.tags.variableName)],color:B,fontStyle:"bold"},{tag:[t.tags.labelName],color:m},{tag:[t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name)],color:S},{tag:[t.tags.definition(t.tags.name),t.tags.separator],color:m},{tag:[t.tags.brace],color:m},{tag:[t.tags.annotation],color:ot},{tag:[t.tags.number,t.tags.changed,t.tags.annotation,t.tags.modifier,t.tags.self,t.tags.namespace],color:S},{tag:[t.tags.typeName,t.tags.className],color:p},{tag:[t.tags.operator,t.tags.operatorKeyword],color:N},{tag:[t.tags.tagName],color:_,fontStyle:"bold"},{tag:[t.tags.squareBracket],color:q},{tag:[t.tags.angleBracket],color:tt},{tag:[t.tags.attributeName],color:_},{tag:[t.tags.regexp],color:_},{tag:[t.tags.quote],color:Z},{tag:[t.tags.string],color:m},{tag:t.tags.link,color:ho,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[t.tags.url,t.tags.escape,t.tags.special(t.tags.string)],color:S},{tag:[t.tags.meta],color:p},{tag:[t.tags.comment],color:Z,fontStyle:"italic"},{tag:t.tags.strong,fontWeight:"bold",color:q},{tag:t.tags.emphasis,fontStyle:"italic",color:B},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:t.tags.heading,fontWeight:"bold",color:B},{tag:[t.tags.heading1,t.tags.heading2],fontWeight:"bold",color:B},{tag:[t.tags.heading3,t.tags.heading4],fontWeight:"bold",color:p},{tag:[t.tags.heading5,t.tags.heading6],color:p},{tag:[t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:S},{tag:[t.tags.processingInstruction,t.tags.inserted],color:st},{tag:[t.tags.contentSeparator],color:N},{tag:t.tags.invalid,color:q,borderBottom:`1px dotted ${ot}`}]),yo=[po,E.syntaxHighlighting(ko)];St({light:{extension:Qt,colors:{accentColor:"#79740e",syntaxMarker:"#076678"}},dark:{extension:yo,colors:{accentColor:"#b8bb26",syntaxMarker:"#83a598"}}});
